(this["webpackJsonpbulk-sms-client"]=this["webpackJsonpbulk-sms-client"]||[]).push([[0],{142:function(e,t,a){},143:function(e,t,a){},144:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),r=a(74),l=a.n(r),c=a(2),o=a(3),i=a(5),m=a(4),u=a(28),h=a(27),p=a(40),d=a(29),g=a(1),E=a(146),f=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.nameInput.focus()}},{key:"render",value:function(){var e=this;return n.a.createElement(s.Fragment,null,n.a.createElement("div",{className:"bulksms__to-contact-container"},n.a.createElement("div",{className:"bulksms__to-contact"},n.a.createElement(s.Fragment,null,this.props.contacts.map((function(t,a){return n.a.createElement("p",{key:a+1,className:"bulksms__to-contact-number"},t,n.a.createElement("i",{onClick:e.props.handleClick,id:"".concat(t),className:"icofont-delete"}))}))),n.a.createElement("form",{className:"bulksms__to-contact-form",onSubmit:this.props.handleAddContact},n.a.createElement("input",{type:"tel",name:"contact",placeholder:"number",onChange:this.props.handleChange,value:this.props.contact,ref:function(t){e.nameInput=t}}),n.a.createElement("button",null,"Add")))),n.a.createElement("p",{className:"bulksms__to-contact-message",style:this.props.hasErr?{color:"#fa392b"}:{color:"#05c568"}},this.props.message))}}]),a}(s.Component),b=Object(g.d)(f),v=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{className:"spinner"})}}]),a}(s.Component),_=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return n.a.createElement(s.Fragment,null,n.a.createElement("div",{className:"bulksms__to-file-contact"},n.a.createElement(s.Fragment,null,this.props.contacts.length>0?n.a.createElement("div",{className:"bulksms__to-file-contact-container"},this.props.contacts.map((function(t,a){return n.a.createElement("p",{key:a+1,className:"bulksms__to-file-contact-number",style:{fontSize:"1.2rem",color:"#212121",fontWeight:400}},t,n.a.createElement("i",{id:"".concat(t),onClick:e.props.handleClick,className:"icofont-delete"}))}))):null),this.props.extracting?null:n.a.createElement(s.Fragment,null,this.props.file?n.a.createElement("div",{className:"bulksms__to-file-contact-info"},n.a.createElement("i",{className:"icofont-file-document"}),n.a.createElement("p",null,"File : ",this.props.file.name),n.a.createElement("p",null,"Size : ",(this.props.file.size/1024).toFixed(2)," KB"),n.a.createElement("button",{onClick:this.props.extract},"Extract")):n.a.createElement(s.Fragment,null,this.props.contacts.length>0?null:n.a.createElement(s.Fragment,null,n.a.createElement("p",null,"Choose an excel file to upload"),n.a.createElement("form",{className:"bulksms__to-file-form"},n.a.createElement("label",{htmlFor:"file"},n.a.createElement("p",null,n.a.createElement("i",{className:"icofont-upload-alt"}),"Browse")),n.a.createElement("input",{type:"file",name:"file",id:"file",onChange:this.props.handleChangeFile}))))),this.props.extracting?n.a.createElement(s.Fragment,null,n.a.createElement(v,null),n.a.createElement("p",{className:"bulksms__to-contact-message"},"Extracting contacts...")):null,n.a.createElement("p",{className:"bulksms__to-contact-message",style:this.props.hasErr?{color:"#fa392b"}:{color:"#05c568"}},this.props.errMessage)))}}]),a}(s.Component),k=Object(g.d)(_),j=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=["bulksms__to-navigation-item"],t=["bulksms__to-navigation-item"];return"normal"===this.props.mode&&e.push("bulksms__to-navigation-item-active"),"file"===this.props.mode&&t.push("bulksms__to-navigation-item-active"),n.a.createElement(s.Fragment,null,n.a.createElement("div",{className:"bulksms__to-heading-wrapper"},n.a.createElement("p",{className:"bulksms__to-heading"},"Send campaign SMS")),n.a.createElement("div",{className:"bulksms__to-navigation"},n.a.createElement("div",{className:e.join(" "),onClick:this.props.setModeNormal},n.a.createElement("i",{className:"icofont-pen-alt-2"}),n.a.createElement("p",null,"Enter Number")),n.a.createElement("div",{className:t.join(" "),onClick:this.props.setModeFile},n.a.createElement("i",{className:"icofont-upload-alt"}),n.a.createElement("p",null,"Number from file"))))}}]),a}(s.Component),C=Object(g.d)(j),O=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return n.a.createElement(s.Fragment,null,n.a.createElement("section",{className:"bulksms__to"},n.a.createElement(C,{mode:this.props.mode,setModeNormal:this.props.setModeNormal,setModeFile:this.props.setModeFile,contacts:this.props.contacts}),"normal"===this.props.mode?n.a.createElement(b,{handleAddContact:this.props.handleAddContact,handleChange:this.props.handleChange,contact:this.props.contact,contacts:this.props.contacts,message:this.props.message,hasErr:this.props.hasErr,handleClick:this.props.removeNumber}):null,"file"===this.props.mode?n.a.createElement(k,{hasErr:this.props.hasErr,handleChangeFile:this.props.handleChangeFile,file:this.props.file,errMessage:this.props.fileErrMessage,extract:this.props.extract,extracting:this.props.extracting,contacts:this.props.contacts,handleClick:this.props.removeNumber}):null,this.props.contacts.length>0?n.a.createElement("div",{className:"bulksms__clear-btn-wrapper"},n.a.createElement("button",{className:"bulksms__clear-btn",onClick:this.props.clearContacts},"Clear all contacts")):null))}}]),a}(s.Component),M=Object(g.d)(O),N=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return n.a.createElement(s.Fragment,null,n.a.createElement("div",{className:"bulksms__message"},n.a.createElement("p",{className:"bulksms__message-heading"},"The text of your message"),n.a.createElement("div",{className:"bulksms__message-container"},n.a.createElement("textarea",{name:"message",placeholder:"Type your message here",value:this.props.message,onChange:this.props.handleChange})),n.a.createElement("p",{className:"bulksms__message-heading",style:this.props.hasErr?{color:"#cf7703",fontSize:"12px",fontWeight:"400"}:{color:"#212121",fontSize:"12px",fontWeight:"400"}},this.props.errMessage)))}}]),a}(s.Component),S=Object(g.d)(N),y=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{className:"bulksms__senderid"},n.a.createElement("p",{className:"bulksms__senderid-heading"},"Sender ID"),n.a.createElement("input",{name:"senderId",placeholder:"Sender ID",type:"tel",value:this.props.senderId,onChange:this.props.handleChange}))}}]),a}(s.Component),x=Object(g.d)(y),F=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return n.a.createElement("section",{className:"bulksms__popup"},n.a.createElement("div",{className:"bulksms__popup-message-box"},this.props.loading?n.a.createElement(v,null):n.a.createElement(s.Fragment,null,this.props.messageErr?null:n.a.createElement("i",{className:"icofont-ui-messaging"})),this.props.messageErr?n.a.createElement("i",{className:"icofont-exclamation-tringle",style:{color:"#fa392b"}}):null,n.a.createElement("p",{style:this.props.sendingErr?{color:"#fa392b"}:{color:"#212121"}},this.props.sendingMessage),this.props.loading?null:n.a.createElement("button",{onClick:this.props.handleClick},"Close")))}}]),a}(s.Component),w=Object(g.d)(F),I=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={open:!1,sending:!1,mode:"normal",hasErr:!1,errMessage:"",messageWarning:"",messageErr:!1,senderErrMessage:"",sendErrMessage:"",sendingMessage:"",sendingErr:!1,loading:!1,file:null,fileErrMessage:"",extracting:!1,contact:"",message:"",contacts:[],senderId:""},e.closePopup=function(){e.setState({open:!1,messageErr:!1}),e.state.messageErr||e.setState({open:!1,contacts:[],contact:"",file:"",senderId:"",message:""})},e.sendMessage=function(){var t=e.state,a=t.contacts,s=t.senderId,n=t.message;if(0!==a.length)if(n&&"string"===typeof n)if(n.length>160)e.setState({sendErrMessage:"Message cannot be more than 160 charactaers!",hasErr:!0});else if(e.state.senderId)if(a.length>5e3)e.setState({sendErrMessage:"Contacts has exceeded 10,000 limits!",hasErr:!0});else{e.setState({hasErr:!1,sendErrMessage:""});var r={contacts:a,senderId:s,message:n};e.setState({sending:!0,loading:!0,open:!0,sendingMessage:"Sending message..."}),fetch("/message",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then((function(e){return e.json()})).then((function(t){console.log(t),e.setState({sending:!1,loading:!1,messageErr:"success"!==t.status,sendingMessage:t.message})})).catch((function(t){e.setState({loading:!1,sending:!1,messageErr:!0,sendingMessage:"Error occured while sending message"})}))}else e.setState({sendErrMessage:"Please Enter SenderID",hasErr:!0});else e.setState({sendErrMessage:"Please write valid message with no special characters",hasErr:!0});else e.setState({sendErrMessage:"No contacts to send message to!",hasErr:!0})},e.handleChangeFile=function(t){e.setState({file:t.target.files[0]})},e.extract=function(){e.setState({sendErrMessage:""});var t=e.state.file,a=t.name.split("."),s=a[a.length-1].toLowerCase();if(t){if(e.setState({fileErrMessage:"",hasErr:!1}),!["xlsx"].includes(s))return e.setState({fileErrMessage:"Upload a valid excel file! .xlsx",hasErr:!0,file:null}),void setTimeout((function(){e.setState({fileErrMessage:"",hasErr:!1})}),3e3);var n=[];e.setState({extracting:!0}),Object(E.a)(t).then((function(t){for(var a=0;a<t.length;a++)for(var s=0;s<t[a].length;s++){var r=t[a][s];n.push(r)}var l="",c=!1;0===(n=(n=n.map((function(e){return"".concat(e).startsWith("+")?e:"+".concat(e)}))).filter((function(e){return/^\+[1-9]\d{1,14}$/g.test(e)}))).length&&(c=!0,l="No contacts found!"),n.length>5e3&&(l="Contacts has exeeded 10,000 limits",c=!1),e.setState({extracting:!1,fileErrMessage:l,file:null,contacts:Object(d.a)(n),hasErr:c})})).catch((function(t){console.log(t),e.setState({hasErr:!0,errMessage:"Error extracting file!"})}))}else e.setState({fileErrMessage:"Please upload a file",hasErr:!0})},e.removeNumber=function(t){var a=e.state.contacts;a=a.filter((function(e){return e!==t.target.id})),e.setState({contacts:Object(d.a)(a)})},e.setModeFile=function(){return e.setState({mode:"file",contacts:[],contact:""})},e.setModeNormal=function(){return e.setState({mode:"normal",contacts:[],contact:""})},e.handleChange=function(t){t.preventDefault(),e.setState(Object(p.a)(Object(p.a)({errMessage:"",sendErrMessage:"",sendMessage:""},e.state),{},Object(h.a)({},t.target.name,t.target.value))),"message"===t.target.name&&(t.target.value.split("").length>160?e.setState({hasErr:!0,messageWarning:"Message exceeded 160 characters!"}):e.setState({messageWarning:""}))},e.handleAddContact=function(t){t.preventDefault();var a=e.state,s=a.contact,n=a.contacts;s?/^\+[1-9]\d{1,14}$/g.test(s)?"".concat(s).length<10?e.setState({hasErr:!0,errMessage:"Enter a valid number eg 19345876765!"}):n.includes(s)?e.setState({errMessage:"Contact already added!",hasErr:!0}):(n.push(s),e.setState({errMessage:"",contacts:Object(d.a)(n),contact:"",sendMessage:""})):e.setState({hasErr:!0,errMessage:"Enter a valid number in E.164 format eg +33609876548!"}):e.setState({hasErr:!0,errMessage:"Enter a valid number!"})},e.clearContacts=function(){e.setState({contacts:[]})},e}return Object(o.a)(a,[{key:"render",value:function(){return n.a.createElement(s.Fragment,null,n.a.createElement("main",{className:"bulksms"},n.a.createElement("div",{className:"bulksms__container"},n.a.createElement(M,{setModeNormal:this.setModeNormal,setModeFile:this.setModeFile,mode:this.state.mode,handleAddContact:this.handleAddContact,contact:this.state.contact,handleChange:this.handleChange,contacts:this.state.contacts,message:this.state.errMessage,hasErr:this.state.hasErr,handleChangeFile:this.handleChangeFile,file:this.state.file,fileErrMessage:this.state.fileErrMessage,extract:this.extract,extracting:this.state.extracting,removeNumber:this.removeNumber,clearContacts:this.clearContacts}),n.a.createElement(S,{handleChange:this.handleChange,message:this.state.message,errMessage:this.state.messageWarning,hasErr:this.state.hasErr}),n.a.createElement("div",{className:"bulksms__to-total-contact-wrapper"},n.a.createElement("p",null,"Total Contacts :",n.a.createElement("span",null,this.state.contacts.length))),n.a.createElement("div",{className:"bulksms__senderid-wrapper"},n.a.createElement(x,{hasErr:this.state.hasErr,handleChange:this.handleChange,senderId:this.state.senderId,senderErrMessage:this.state.senderErrMessage}),n.a.createElement("button",{className:"bulksms__sendmessage-button",onClick:this.sendMessage},"SEND MESSAGE")),n.a.createElement("p",{className:"bulksms__to-contact-message",style:this.state.hasErr?{color:"#fa392b"}:{color:"#05c568"}},this.state.sendErrMessage))),this.state.open?n.a.createElement(w,{sendingMessage:this.state.sendingMessage,sendingErr:this.state.sendingErr,handleClick:this.closePopup,loading:this.state.loading,messageErr:this.state.messageErr}):null)}}]),a}(s.Component),W=Object(g.d)(I),A=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{className:"layout"},this.props.children)}}]),a}(s.Component),D=Object(g.d)(A),P=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return n.a.createElement("nav",{className:"navigation"},n.a.createElement(u.b,{to:"/"},n.a.createElement("p",{className:"navigation__logo-tagline"},"BULK SMS SENDER"),n.a.createElement("i",{className:"icofont-ui-messaging"})))}}]),a}(s.Component),T=Object(g.d)(P),z=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return n.a.createElement(s.Fragment,null,n.a.createElement(u.a,null,n.a.createElement(D,null,n.a.createElement(T,null),n.a.createElement(W,null))))}}]),a}(s.Component);a(142),a(143),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},79:function(e,t,a){e.exports=a(144)},92:function(e,t){},94:function(e,t){}},[[79,1,2]]]);
//# sourceMappingURL=main.1e2a385d.chunk.js.map